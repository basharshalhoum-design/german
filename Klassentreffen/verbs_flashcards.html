<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verben Flashcards - Klassentreffen</title>
    <style>
        /* Mobile-First Layout & Styling */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .header {
            background-color: #0056b3;
            color: white;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .header a {
            color: white;
            text-decoration: none;
            margin: 0 10px;
            font-weight: bold;
            font-size: 1.1em;
        }
        /* Main content area to center the card */
        .content {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }
        /* Single-sided card */
        .flashcard {
            width: 100%;
            max-width: 400px; /* One card per screen, slightly wider */
            min-height: 280px;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 12px;
            padding: 25px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .flashcard .german-word {
            font-size: 2.2em;
            font-weight: bold;
            color: #0056b3;
            margin-bottom: 15px;
            cursor: pointer; /* Indicates it's clickable for audio replay */
            text-decoration: underline;
            text-decoration-color: #0056b350;
            transition: color 0.15s;
        }
        .flashcard .german-word:hover {
            color: #007bff;
        }
        .flashcard .translation {
            font-size: 1.4em;
            color: #333;
            margin-bottom: 20px;
        }
        .flashcard .example {
            font-size: 1em;
            color: #555;
            font-style: italic;
            border-top: 1px solid #eee;
            padding-top: 15px;
        }
        .flashcard .example strong {
            color: #000;
        }
        /* Controls area for button and progress */
        .controls {
            padding: 20px;
            text-align: center;
            background-color: #ffffff;
            border-top: 1px solid #ddd;
        }
        #next-button {
            background-color: #28a745; /* Changed color to distinguish from header */
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 30px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 10px;
        }
        #next-button:hover {
            background-color: #1e7e34;
        }
        .progress-tracker {
            color: #666;
            font-weight: bold;
            font-size: 1.1em;
        }
    </style>
</head>
<body>
    <div class="header">
        <a href="index.html">🏠 Hauptmenü</a>
        <span>Verben: Flashcards (1/3)</span>
    </div>

    <div class="content">
        <div class="flashcard">
            <div class="german-word" id="german-word">...</div>
            <div class="translation" id="arabic-translation">...</div>
            <div class="example" id="hint">...</div>
        </div>
    </div>

    <div class="controls">
        <button id="next-button">Next</button>
        <div class="progress-tracker" id="progress-tracker">0 / 0</div>
    </div>

    <script>
        // --- DATA (MP3 URLs removed, using only German text) ---
        const verbData = [
            { german: "machen", arabic: "يفعل / يقوم بـ", example: "Vor 20 Jahren haben sie Abitur <strong>gemacht</strong>." },
            { german: "interessieren", arabic: "يهتم بـ", example: "für internationales Handelsrecht <strong>interessiert</strong>." },
            { german: "sein", arabic: "يكون (كان)", example: "Nach dem Examen <strong>war</strong> ich Assistentin." },
            { german: "bewerben", arabic: "يتقدم لوظيفة", example: "mich bei der Deutschen Bank <strong>beworben</strong>." },
            { german: "klappen", arabic: "ينجح / ينجز", example: "das hat auch <strong>geklappt</strong>." },
            { german: "bekommen", arabic: "يحصل على", example: "eine Stelle in der Auslandsabteilung <strong>bekommen</strong>." },
            { german: "reisen", arabic: "يسافر", example: "Ich <strong>reise</strong> viel, beruflich und privat." },
            { german: "passen", arabic: "يناسب", example: "Aber zu meinem Leben <strong>passt</strong> kein Kind." },
            { german: "akzeptieren", arabic: "يتقبل", example: "Welcher Mann <strong>akzeptiert</strong> schon..." },
            { german: "stehen", arabic: "يقف / يكون في (المرتبة)", example: "dass er immer an zweiter Stelle <strong>steht</strong>." },
            { german: "sollen", arabic: "ينبغي", example: "das <strong>soll</strong> auch so bleiben." },
            { german: "können", arabic: "يستطيع", example: "<strong>konnte</strong> ich mich noch nicht ... entscheiden." },
            { german: "entscheiden", arabic: "يقرر", example: "für ein bestimmtes Studium <strong>entscheiden</strong>." },
            { german: "gehen", arabic: "يذهب", example: "ins Ausland <strong>gegangen</strong>." },
            { german: "verbessern", arabic: "يحسن / يطور", example: "meine Sprachkenntnisse ... <strong>verbessert</strong>." },
            { german: "zurückkommen", arabic: "يعود", example: "bin ich nach Deutschland <strong>zurückgekommen</strong>." },
            { german: "entschließen", arabic: "يقرر (يعقد العزم)", example: "habe mich <strong>entschlossen</strong>, Lehrerin zu werden." },
            { german: "werden", arabic: "يصبح", example: "Lehrerin zu <strong>werden</strong>." },
            { german: "anfangen", arabic: "يبدأ", example: "Also habe ich <strong>angefangen</strong>, Sprachen zu studieren." },
            { german: "kennenlernen", arabic: "يتعرف على", example: "habe ich meinen Mann <strong>kennengelernt</strong>." },
            { german: "hatte", arabic: "كان لديه", example: "Ich <strong>hatte</strong> Zahnschmerzen." },
            { german: "arbeiten", arabic: "يعمل", example: "als Urlaubsvertretung <strong>gearbeitet</strong>." },
            { german: "verlieben", arabic: "يقع في الحب", example: "Ich habe mich sofort in ihn <strong>verliebt</strong>." },
            { german: "heiraten", arabic: "يتزوج", example: "und wir haben bald <strong>geheiratet</strong>." },
            { german: "kommen", arabic: "يأتي / يولد", example: "ist unser Sohn auf die Welt <strong>gekommen</strong>." },
            { german: "kümmern", arabic: "يعتني بـ", example: "meine Mutter sich ... um das Kind <strong>gekümmert hat</strong>." },
            { german: "vorbereiten", arabic: "يحضر / يجهز", example: "auf das zweite Staatsexamen <strong>vorbereiten</strong>." },
            { german: "unterrichten", arabic: "يدرّس", example: "Englisch und Spanisch <strong>unterrichtet</strong>." },
            { german: "wollen", arabic: "يريد", example: "Mit 35 <strong>wollte</strong> ich noch ein Kind haben." },
            { german: "nehmen", arabic: "يأخذ", example: "Erziehungsurlaub <strong>genommen</strong>." },
            { german: "schreiben", arabic: "يكتب", example: "Kinderbücher zu <strong>schreiben</strong>." },
            { german: "bearbeiten", arabic: "يعالج / يحرر", example: "ein großes Märchenbuch für Kinder <strong>bearbeiten</strong>." },
            { german: "freuen", arabic: "يفرح / يسعد بـ", example: "habe ich mich natürlich sehr <strong>gefreut</strong>." },
            { german: "denken", arabic: "يفكر / يعتقد", example: "Ich habe immer <strong>gedacht</strong>, dass ich einmal Arzt werde." },
            { german: "versuchen", arabic: "يحاول", example: "Ich habe <strong>versucht</strong>, eine Zivildienststelle ... zu bekommen." },
            { german: "sehen", arabic: "يرى", example: "Ich konnte einfach kein Blut <strong>sehen</strong>." },
            { german: "ärgern", arabic: "يغضب", example: "Vater hat sich furchtbar ... <strong>geärgert</strong>." },
            { german: "fortsetzen", arabic: "يواصل / يكمل", example: "dass ich die Tradition der Familie <strong>fortsetze</strong>." },
            { german: "finanzieren", arabic: "يمول", example: "Um mein Studium zu <strong>finanzieren</strong>..." },
            { german: "sammeln", arabic: "يجمع", example: "viele Erfahrungen <strong>gesammelt</strong>." },
            { german: "selbstständig machen", arabic: "يؤسس عمله الخاص", example: "habe ich mich <strong>selbstständig gemacht</strong>." },
            { german: "zusammenarbeiten", arabic: "يعمل سوياً", example: "und <strong>arbeitet</strong> mit mir <strong>zusammen</strong>." },
            { german: "wissen", arabic: "يعرف", example: "Wir <strong>wissen</strong> schon, dass es ein Mädchen wird." },
            { german: "helfen", arabic: "يساعد", example: "Das hat mir sehr <strong>geholfen</strong>." },
            { german: "hatten", arabic: "كان لديهم", example: "weil meine Eltern kein Geld <strong>hatten</strong>." },
            { german: "müssen", arabic: "يجب", example: "Und so <strong>musste</strong> ich ... auch nicht arbeiten." },
            { german: "gehen (in die...)", arabic: "يتجه إلى (مجال)", example: "in die Wirtschaft zu <strong>gehen</strong>." },
            { german: "sollen", arabic: "ينبغي (للمستقبل)", example: "dass ich einmal das kleine Hotel ... bekommen <strong>sollte</strong>.", audioUrl: "audio/sollen_future.mp3" },
            { german: "besuchen", arabic: "يزور / يرتاد (مدرسة)", example: "eine Hotelfachschule <strong>besucht</strong>." },
            { german: "vergrößern", arabic: "يكبر / يوسع", example: "die Zahl der Zimmer zu <strong>vergrößern</strong>." },
            { german: "erneuern", arabic: "يجدد", example: "die Einrichtung der Küche komplett zu <strong>erneuern</strong>." },
            { german: "einbauen", arabic: "يركب / يضيف (بناء)", example: "einen Aufzug ... <strong>einzubauen</strong>." },
            { german: "bauen", arabic: "يبني", example: "ein großes Hotel ... <strong>gebaut</strong>." },
            { german: "kaputt machen", arabic: "يدمر / يحطم", example: "Diese Konkurrenz hat uns <strong>kaputt gemacht</strong>." },
            { german: "bezahlen", arabic: "يدفع (مال)", example: "die Kredite der Bank nicht mehr <strong>bezahlen</strong>." },
            { german: "verkaufen", arabic: "يبيع", example: "und musste <strong>verkaufen</strong>." },
            { german: "übernehmen", arabic: "يتولى / يستحوذ على", example: "Danach habe ich ein Restaurant <strong>übernommen</strong>." },
            { german: "aufgeben", arabic: "يستسلم / يتخلى عن", example: "habe ich danach <strong>aufgegeben</strong>." },
            { german: "basteln", arabic: "يعمل أشغال يدوية / يصلح", example: "um daran zu <strong>basteln</strong>." },
            { german: "fliegen", arabic: "يطير", example: "oder damit zu <strong>fliegen</strong>." }
        ];
        
        let currentCardIndex = 0;
        const totalCards = verbData.length;
        let germanVoice = null;
        
        // --- Web Speech API Setup (Only TTS) ---
        function loadVoices() {
            const voices = speechSynthesis.getVoices();
            // Try to find a standard German voice
            germanVoice = voices.find(v => v.lang === "de-DE" || v.lang.startsWith("de"));
            if (!germanVoice) {
                console.warn("No specific German voice found. Will use default voice for TTS.");
            }
        }

        // Must check if the API is available
        if ('speechSynthesis' in window) {
            if (speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = loadVoices;
            }
            loadVoices();
        } else {
            console.error("Web Speech API not supported in this browser. Audio will not work.");
        }

        // Core TTS function
        function speak(text) {
            if (!('speechSynthesis' in window)) return;
            
            // Cancel any current speaking
            if (speechSynthesis.speaking) {
                speechSynthesis.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = "de-DE";
            
            if (germanVoice) {
                utterance.voice = germanVoice;
            } else {
                // Set language even if voice isn't explicitly found
                utterance.lang = "de-DE"; 
            }
            
            speechSynthesis.speak(utterance);
        }
        // --- End Web Speech API Setup ---


        // --- Element Selectors ---
        const germanWordElement = document.getElementById('german-word');
        const arabicTranslationElement = document.getElementById('arabic-translation');
        const hintElement = document.getElementById('hint');
        const progressTrackerElement = document.getElementById('progress-tracker');
        const nextButton = document.getElementById('next-button');

        // --- Core Audio Function (Simplified to TTS Only) ---
        function playAudio(text) {
            speak(text);
        }

        // Function to load a card's data into the UI
        function loadCard(index) {
            const data = verbData[index];
            germanWordElement.textContent = data.german;
            arabicTranslationElement.textContent = data.arabic;
            hintElement.innerHTML = `Beispiel: ${data.example}`;
            
            // Update Progress Tracker
            progressTrackerElement.textContent = `${index + 1} / ${totalCards}`;
        }

        // Function to advance to the next card
        function nextCard() {
            // Increment index, looping back to 0 at the end
            currentCardIndex = (currentCardIndex + 1) % totalCards;
            
            // Load the new card's data
            const data = verbData[currentCardIndex];
            loadCard(currentCardIndex);
            
            // Play the audio using TTS
            playAudio(data.german);
        }

        // --- Event Listeners ---
        
        // 1. Next button: advances card and plays new audio
        nextButton.addEventListener('click', nextCard);

        // 2. German word click: replays the current audio
        germanWordElement.addEventListener('click', () => {
            const data = verbData[currentCardIndex];
            playAudio(data.german);
        });

        // 3. Load the very first card when the page opens (and play its audio)
        window.addEventListener('load', () => {
            loadCard(currentCardIndex);
            const data = verbData[currentCardIndex];
            playAudio(data.german);
        });

    </script>
</body>
</html>
